<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>GENCO ECO QUEST</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  <style>
    body {
      min-height: 100vh;
      background-image: url("https://genco.co.th/wp-content/uploads/2022/12/modern-architecture-urban-skyline.jpg");
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      font-family: "Prompt", sans-serif;
    }

    /* ‡πÇ‡∏•‡πÇ‡∏Å‡πâ */
    .game-icon {
      max-width: 380px;
      width: 100%;
    }

    /* ===== MAP WRAPPER (‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á) ===== */
    .map-wrapper {
      position: relative;
      width: 100%;
      max-width: 420px;   /* ‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏£‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
      margin: auto;
    }

    .map-img {
      width: 100%;
      display: block;
    }

    /* ===== ‡∏à‡∏∏‡∏î‡∏ß‡∏á ===== */
    .check_pont {
      position: absolute;
      border: 4px solid red;
      border-radius: 50%;
      background: transparent;
      z-index: 10;
      box-shadow:
        -2px -2px 0 #fff,
         2px -2px 0 #fff,
        -2px  2px 0 #fff,
         2px  2px 0 #fff;
    }

    /* ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ map) */
    .pont1 { top: 35%; left: 5%;  width: 12%; aspect-ratio: 1; }
    .pont2 { top: 30%; left: 62%; width: 22%; aspect-ratio: 1; }
    .pont3 { top: 60%; left: 8%;  width: 22%; aspect-ratio: 1; }
    .pont4 { top: 62%; left: 72%; width: 12%; aspect-ratio: 1; }

    /* animation */
    .pont { opacity: 0; transition: all .25s ease; }
    .pont.active {
      opacity: 1;
      transform: scale(1.1);
    }
  </style>
</head>

<body>

<div class="container-fluid pt-3">

  <!-- LOGO -->
  <div class="text-center mb-2">
    <img src="asset/icongame.png" class="img-fluid game-icon">
  </div>

  <!-- MAP + POINT -->
  <div class="map-wrapper">
    <img src="asset/map.png" class="map-img">

    <div class="check_pont pont1 pont" data-name="pont1"></div>
    <div class="check_pont pont2 pont" data-name="pont2"></div>
    <div class="check_pont pont3 pont" data-name="pont3"></div>
    <div class="check_pont pont4 pont" data-name="pont4"></div>
  </div>

</div>

<script>
/* ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ GET */
function getQueryParams() {
  const p = new URLSearchParams(window.location.search);
  return {
    name: p.get('name') || '-',
    phone: p.get('phone') || '-'
  };
}

window.onload = () => {

  const points = [
    document.querySelector('.pont2'),
    document.querySelector('.pont3'),
    document.querySelector('.pont1'),
    document.querySelector('.pont4')
  ];

  let index = 0;
  let speed = 70;
  let rounds = 0;
  const maxRounds = 25;

  const finalIndex = Math.floor(Math.random() * points.length);

  function run() {
    points.forEach(p => p.classList.remove('active'));
    points[index].classList.add('active');

    index = (index + 1) % points.length;
    rounds++;

    if (rounds > maxRounds * 0.6) speed += 60;

    if (rounds >= maxRounds && index === finalIndex) {
      const q = getQueryParams();
      const pointName = points[finalIndex].dataset.name;

      setTimeout(() => {
        alert(
          `üéØ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°\n` +
          `‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ: ${pointName}\n` +
          `‡∏ä‡∏∑‡πà‡∏≠: ${q.name}\n` +
          `‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${q.phone}`
        );
      }, 300);

      return;
    }

    setTimeout(run, speed);
  }

  run();
};
</script>

</body>
</html>
