<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <title>GENCO ECO QUEST</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
 

    <!-- https://script.google.com/macros/s/AKfycbxqaS-sO5G3O5H1c7hrFE3vdRWK2rit-dQkMlJzp8PqxQDvg96Zs8Kdrk_HC496Oaf8/exec -->
    <style>
      body {
        min-height: 100vh;
        background-image: url("https://genco.co.th/wp-content/uploads/2022/12/modern-architecture-urban-skyline.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        font-family: "Prompt", sans-serif;
      }

      /* ‡πÇ‡∏•‡πÇ‡∏Å‡πâ */
      .game-icon {
        max-width: 380px;
        width: 100%;
      }

      /* ===== MAP WRAPPER (‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á) ===== */
      .map-wrapper {
        position: relative;
        width: 100%;
        max-width: 420px; /* ‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏£‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        margin: auto;
      }

      .map-img {
        width: 100%;
        display: block;
      }

      /* ===== ‡∏à‡∏∏‡∏î‡∏ß‡∏á ===== */
      .check_pont {
        position: absolute;
        border: 4px solid red;
        border-radius: 50%;
        background: transparent;
        z-index: 10;
        box-shadow:
          -2px -2px 0 #fff,
          2px -2px 0 #fff,
          -2px 2px 0 #fff,
          2px 2px 0 #fff;
      }

      /* ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ map) */
      .pont1 {
        top: 14%;
        left: 10%;
        width: 38%;
        aspect-ratio: 1;
      }
      .pont2 {
        top: 12%;
        left: 59%;
        width: 38%;
        aspect-ratio: 1;
      }
      .pont3 {
        top: 53%;
        left: -1%;
        width: 45%;
        aspect-ratio: 1;
      }
      .pont4 {
        top: 49%;
        left: 44%;
        width: 55%;
        aspect-ratio: 1;
      }

      /* animation */
      .pont {
        opacity: 0;
        transition: all 0.25s ease;
      }
      .pont.active {
        opacity: 1;
        transform: scale(1.1);
      }

      .gamecard {
        margin-top: 25px;
        background-color: rgba(255, 255, 255, 0.412);
        border-radius: 15px;
      }

      .promo-badge {
        background: #ffffff;
        color: #2f6f3e;
        font-weight: 600;
        font-size: 16px;
        padding: 10px 18px;
        border-radius: 30px;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin: 16px 0;
      }

      .promo-badge-low {
        background: #ffffff;
        color: #000000;
         font-weight: 600; 
        font-size: 16px;
        padding: 10px 18px;
        border-radius: 15px 15px 0 0;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin: 36px 0;
      }


      .promo-badge-reward {

        font-size: 22px;
        color: #016715;
       
      }


            .qw {

        font-size: 22px;
        font-weight: 600; 
        color: #002271;
       
      }



.answer-btn {
  width: 100%;
  padding: 16px;
  margin: 10px 0;
  font-size: 20px;
  font-weight: bold;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.answer-a {
  background: linear-gradient(135deg, #4CAF50, #2e7d32);
  color: #fff;
}

.answer-b {
  background: linear-gradient(135deg, #4CAF50, #2e7d32);
  color: #fff;
}

.answer-btn:hover {
  transform: scale(1.03);
  box-shadow: 0 6px 16px rgb(255, 255, 255);
}












    </style>
  </head>

  <body>
    <div class="container-fluid pt-3">
      <!-- LOGO -->
      <div class="text-center mb-2">
        <img src="asset/icongame.png" class="img-fluid game-icon" />
      </div>

      <!-- MAP + POINT -->
      <div class="map-wrapper gamecard">
        <div class="promo-badge">üå≥ ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏±‡∏Å‡πÇ‡∏•‡∏Å üå≥</div>

        <img src="asset/map.png" class="map-img" />

        <div
          class="check_pont pont1 pont"
          data-name="‡∏ô‡πâ‡∏≥‡πÄ‡∏™‡∏µ‡∏¢"
        ></div>
        <div
          class="check_pont pont2 pont"
          data-name="‡πÄ‡∏®‡∏©‡∏ß‡∏±‡∏™‡∏î‡∏∏"
        ></div>
        <div
          class="check_pont pont3 pont"
          data-name="‡∏ô‡πâ‡∏≥‡∏î‡∏µ"
        ></div>
        <div
          class="check_pont pont4 pont"
          data-name="‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå"
        ></div>

        <div class="promo-badge-low ">
        <div >üôè ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ö</div>

          <div class="text-left" id="text_name"></div>
          <!-- <div id="text_phone"></div> -->
          <div class="text-left" id="text_com"></div>
        <div >‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
          <div class=" promo-badge-reward" id="text_r"></div>

        </div>



      </div>
    </div>

    <script>
      function getQueryParams() {
        const p = new URLSearchParams(window.location.search);
        return {
          name: p.get("name") || "-",
          phone: p.get("phone") || "-",
          com: p.get("com") || "-",
        };
      }




function saveToSheet(name, phone, point ,quest ,reward) {
  const formData = new FormData();
  formData.append("name", name);
  formData.append("phone", phone);
  formData.append("point", point);
  formData.append("quest", quest);
  formData.append("reward", reward);

  fetch("https://script.google.com/macros/s/AKfycbwO2xMjTGSgYbLUWUpBCN_K2EMdeULcKGvwnXcwQvi4u15pejGVQEhLG29oYFs2xZu5/exec", {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(data => {
    console.log("Saved:", data);
  })
  .catch(err => {
    console.error("Error:", err);
  });
}


const questions = {
  Q1: {
    question: "‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏≥‡πÑ‡∏õ‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô",
    answers: ["‡πÅ‡∏™‡∏°‡∏î‡∏≥", "‡∏°‡∏≤‡∏ö‡∏ï‡∏≤‡∏û‡∏∏‡∏î"],
    correct: 1
  },
  Q2: {
    question: "‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£",
    answers: ["‡∏ó‡∏¥‡πâ‡∏á‡∏•‡∏á‡∏ô‡πâ‡∏≥", "‡∏™‡πà‡∏á‡πÑ‡∏õ Genco"],
    correct: 2
  },
    Q3: {
    question: "‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏≥‡πÑ‡∏õ‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô",
    answers: ["‡πÅ‡∏™‡∏°‡∏î‡∏≥", "‡∏°‡∏≤‡∏ö‡∏ï‡∏≤‡∏û‡∏∏‡∏î"],
    correct: 2
  },
    Q4: {
    question: "‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£",
    answers: ["‡∏ó‡∏¥‡πâ‡∏á‡∏•‡∏á‡∏ô‡πâ‡∏≥", "‡∏™‡πà‡∏á‡πÑ‡∏õ Genco"],
    correct: 1
  },
    Q5: {
    question: "‡∏ô‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏î‡∏µ‡∏ï‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà",
    answers: ["‡∏î‡∏µ", "‡πÑ‡∏°‡πà‡∏î‡∏µ"],
    correct: 1
  } ,
      Q6: {
    question: "‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå Recycle ‡∏Ç‡∏≠‡∏á Genco ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏≠‡πÑ‡∏°‡πà",
    answers: ["‡πÉ‡∏ä‡πà", "‡πÑ‡∏°‡πà"],
    correct: 1
  }
};


const questionSets = {
  0: ["Q1", "Q2"],            // ‡∏ä‡∏∏‡∏î 0
  1: ["Q3"],            // ‡∏ä‡∏∏‡∏î 1
  2: ["Q5"],      // ‡∏ä‡∏∏‡∏î 2
  3: ["Q6"]             // ‡∏ä‡∏∏‡∏î 3
};


function answerQuestion(re,choice,name,phone,com,pname) {
  Swal.close();

  const qw = getQuestionBySet(choice);

//alert(re+""+qw.correct);


saveToSheet(name, phone, com,pname+' '+qw.question,qw.answers[re]);


  if (re === qw.correct) {
    document.getElementById('text_r').innerText =  `üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!\n`;
    Swal.fire({
      icon: "success",
      title: "üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!",
      text: "‡πÄ‡∏ä‡∏¥‡∏ç‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üëèüèª",
      confirmButtonText: "‡πÑ‡∏õ‡∏ï‡πà‡∏≠"
    });
  } else {
    document.getElementById('text_r').innerText =  `‚ùå ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\n`;
    Swal.fire({
      icon: "error",
      title: "‚ùå ‡∏ú‡∏¥‡∏î",
      text: "‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞",
      confirmButtonText: "‡πÇ‡∏≠‡πÄ‡∏Ñ"
    });
  }
}




function getQuestionBySet(setKey) {
  const set = questionSets[setKey];   // ‡πÄ‡∏ä‡πà‡∏ô 0
  const qKey = set[Math.floor(Math.random() * set.length)];
  return questions[qKey];
}






      window.onload = () => {


    const query = getQueryParams();

     document.getElementById('text_name').innerText =  ` ‡∏Ñ‡∏∏‡∏ì : ${query.name}\n`;
     document.getElementById('text_com').innerText =  ` ‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó : ${query.com}\n`;

      

  const points = [
    document.querySelector('.pont1'),
    document.querySelector('.pont2'),
    document.querySelector('.pont3'),
    document.querySelector('.pont4')
  ];





        let index = 0;
        let speed = 70;
        let rounds = 0;
        const maxRounds = 5; // ‡∏õ‡∏Å‡∏ï‡∏¥ 25

        const finalIndex = Math.floor(Math.random() * points.length);

        function run() {
          // ‡∏•‡πâ‡∏≤‡∏á active
          points.forEach((p) => p.classList.remove("active"));

          // ‡πÉ‡∏™‡πà active ‡∏ó‡∏µ‡πà index ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
          points[index].classList.add("active");

          // ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏´‡∏¢‡∏∏‡∏î "‡∏Å‡πà‡∏≠‡∏ô" ‡∏Ç‡∏¢‡∏±‡∏ö index
          if (rounds >= maxRounds && index === finalIndex) {
            const q = getQueryParams();
            const pointName = points[index].dataset.name;

          

  const setKey = 0; // ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∏‡∏ì
  const qw = getQuestionBySet(index);



            const textshow = `
        <span style="font-size:16px">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö : ${pointName}</span> 
        <b class="qw" >${qw.question} ‚ùì</b> </br>
      
      `;
      
            setTimeout(() => {

            Swal.fire({
              icon: "warning",
              title: textshow,
              showConfirmButton: false,
              allowOutsideClick: false,
              html: `


                <button class="answer-btn answer-a" onclick="answerQuestion(1,${index},'${query.name}', ${query.phone}, '${query.com}' ,'${pointName}')">
                  ${qw.answers[0]}
                </button>

                <button class="answer-btn answer-b" onclick="answerQuestion(2,${index},'${query.name}', ${query.phone}, '${query.com}' ,'${pointName}')">
                  ${qw.answers[1]}
                </button>


              `
            });



            }

            
            , 300);

            

            
            return; // üõë ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏£‡∏¥‡∏á

          }

          // ‡∏Ñ‡πà‡∏≠‡∏¢‡∏Ç‡∏¢‡∏±‡∏ö index ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î
          index = (index + 1) % points.length;
          rounds++;

          if (rounds > maxRounds * 0.6) speed += 60;

          setTimeout(run, speed);
        }

        run();
      };

      
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
